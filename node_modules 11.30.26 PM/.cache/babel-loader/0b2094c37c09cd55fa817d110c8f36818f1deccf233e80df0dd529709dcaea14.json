{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ying/Code/react-practiculum-2/food-order-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ying/Code/react-practiculum-2/food-order-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ying/Code/react-practiculum-2/food-order-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"/Users/ying/Code/react-practiculum-2/food-order-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/ying/Code/react-practiculum-2/food-order-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useContext,useEffect,useReducer,useState}from'react';import ItemsContext from\"./ItemsContext\";import api from\"../Api/meals\";import{jsx as _jsx}from\"react/jsx-runtime\";export function useItemContext(){return useContext(ItemsContext);}var reducer=function reducer(state,action){var type=action.type,payload=action.payload;switch(type){case\"get\":return _objectSpread(_objectSpread({},state),{},{itemsData:payload});case\"togglePage\":return _objectSpread(_objectSpread({},state),{},{switchPage:!state.switchPage});case\"add\":return _objectSpread(_objectSpread({},state),{},{itemsData:[].concat(_toConsumableArray(state.itemsData),[payload])});case\"remove\":var updatedItemsList=state.itemsData.filter(function(item){return item.id!==payload;});return _objectSpread(_objectSpread({},state),{},{itemsData:updatedItemsList});case\"update\":var updatedItem=state.itemsData.map(function(item){return item.id===payload.id?_objectSpread({},payload):item;});return _objectSpread(_objectSpread({},state),{},{itemsData:updatedItem});default:return state;}};var ItemsProvider=function ItemsProvider(_ref){var children=_ref.children;var _useState=useState(),_useState2=_slicedToArray(_useState,2),editableItem=_useState2[0],setEditableItem=_useState2[1];var _useReducer=useReducer(reducer,{switchPage:true,itemsData:[]}),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];//get meals items data from api\nvar getItemsData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return api.get(\"/meals\");case 2:res=_context.sent;dispatch({type:\"get\",payload:res.data});case 4:case\"end\":return _context.stop();}},_callee);}));return function getItemsData(){return _ref2.apply(this,arguments);};}();useEffect(function(){getItemsData();},[]);//switch page between admin and users\nvar togglePage=function togglePage(){dispatch({type:\"togglePage\",switchPage:!state.switchPage});};//add new item\nvar addNewItem=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(item){var request,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:request=_objectSpread({id:Date.now()},item);_context2.next=3;return api.post(\"/meals\",request);case 3:res=_context2.sent;dispatch({type:\"add\",payload:res.data});case 5:case\"end\":return _context2.stop();}},_callee2);}));return function addNewItem(_x){return _ref3.apply(this,arguments);};}();//delete item from menu\nvar removeItem=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return api.delete(\"/meals/\".concat(id));case 2:dispatch({type:\"remove\",payload:id});case 3:case\"end\":return _context3.stop();}},_callee3);}));return function removeItem(_x2){return _ref4.apply(this,arguments);};}();//Update item \nvar updateItem=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(item){var res;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:console.log(item.id);_context4.next=3;return api.put(\"/meals/\".concat(item.id),item);case 3:res=_context4.sent;console.log(res.data);dispatch({type:\"update\",payload:res.data});case 6:case\"end\":return _context4.stop();}},_callee4);}));return function updateItem(_x3){return _ref5.apply(this,arguments);};}();var itemCtxValue={itemsData:state.itemsData,switchPage:state.switchPage,editableItem:editableItem,setEditableItem:setEditableItem,togglePage:togglePage,getItemsData:getItemsData,addNewItem:addNewItem,removeItem:removeItem,updateItem:updateItem};return/*#__PURE__*/_jsx(ItemsContext.Provider,{value:itemCtxValue,children:children});};export default ItemsProvider;","map":{"version":3,"names":["useContext","useEffect","useReducer","useState","ItemsContext","api","jsx","_jsx","useItemContext","reducer","state","action","type","payload","_objectSpread","itemsData","switchPage","concat","_toConsumableArray","updatedItemsList","filter","item","id","updatedItem","map","ItemsProvider","_ref","children","_useState","_useState2","_slicedToArray","editableItem","setEditableItem","_useReducer","_useReducer2","dispatch","getItemsData","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","get","sent","data","stop","apply","arguments","togglePage","addNewItem","_ref3","_callee2","request","_callee2$","_context2","Date","now","post","_x","removeItem","_ref4","_callee3","_callee3$","_context3","delete","_x2","updateItem","_ref5","_callee4","_callee4$","_context4","console","log","put","_x3","itemCtxValue","Provider","value"],"sources":["/Users/ying/Code/react-practiculum-2/food-order-app/src/Store/ItemsProvider.js"],"sourcesContent":["import { useContext, useEffect, useReducer, useState } from 'react';\nimport ItemsContext from \"./ItemsContext\";\nimport api from \"../Api/meals\";\n\nexport function useItemContext() {\n  return useContext(ItemsContext);\n}\n\nconst reducer = (state, action) => {\n  const { type, payload } = action;\n  switch (type) {\n    case \"get\": \n      return {...state, itemsData: payload};\n    case \"togglePage\":\n      return {...state, switchPage: !state.switchPage};\n    case \"add\":\n      return {...state, itemsData: [...state.itemsData, payload]};\n    case \"remove\":\n      const updatedItemsList = state.itemsData.filter((item) => {\n        return item.id !== payload;\n      })\n      return {\n        ...state, \n        itemsData: updatedItemsList\n      }\n    case \"update\":\n      const updatedItem = state.itemsData.map((item) => {\n        return item.id === payload.id ? {...payload} : item;\n      })\n      return {\n        ...state,\n        itemsData: updatedItem\n      }\n    default: \n      return state;\n  }\n};\n\nconst ItemsProvider = ({ children }) => {\n  const [editableItem, setEditableItem] = useState();\n  const [state, dispatch] = useReducer(reducer, {\n    switchPage: true,\n    itemsData: [],\n  });\n\n  //get meals items data from api\n  const getItemsData = async () => {\n    const res = await api.get(\"/meals\");\n    dispatch({\n      type: \"get\",\n      payload: res.data\n    });\n  };\n\n  useEffect(() => {\n    getItemsData();\n  }, []);\n\n\n  //switch page between admin and users\n  const togglePage = () => {\n    dispatch({\n      type: \"togglePage\",\n      switchPage: !state.switchPage,\n    })\n  }\n\n  //add new item\n  const addNewItem = async (item) => {\n    const request = { id: Date.now(), ...item};\n    const res = await api.post(\"/meals\", request);\n    dispatch({\n      type: \"add\",\n      payload: res.data\n    })\n  }\n\n  //delete item from menu\n  const removeItem = async (id) => {\n    await api.delete(`/meals/${id}`);\n    dispatch({\n      type: \"remove\",\n      payload: id\n    })\n  }\n\n  //Update item \n  const updateItem = async (item) => {\n    console.log(item.id)\n    const res = await api.put(`/meals/${item.id}`, item);\n    console.log(res.data)\n    dispatch({\n      type: \"update\",\n      payload: res.data\n    })\n  }\n\n  const itemCtxValue = {\n    itemsData: state.itemsData,\n    switchPage: state.switchPage,\n    editableItem,\n    setEditableItem,\n    togglePage,\n    getItemsData,\n    addNewItem,\n    removeItem,\n    updateItem\n  }\n\n  return (\n    <ItemsContext.Provider value={itemCtxValue}>\n      { children }\n    </ItemsContext.Provider>\n  );\n}\n\nexport default ItemsProvider;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}